jQuery((function(e){const n=e(".issue__meetings-dropdown button"),t=e(".issue__meetings-select"),s=e(".issue__meetings-select li"),i=e(".issue__meetings-container"),a=e(".issue__meetings-dropdown");var o=-1;function r(s=!0){e(t).hide(),e(t).attr("aria-expanded","false"),e(a).removeClass("open"),s&&e(n).focus()}function c(t){!t.key||"ArrowUp"!==t.key&&"ArrowDown"!==t.key||("ArrowUp"===t.key&&o>-1&&o--,"ArrowDown"===t.key&&o<s.length-1&&o++,o>=0&&o<s.length&&e(s)[o].focus(),-1===o&&n.focus())}function l(t){e(t).data("link")!==e(n).data("link")?(e(t).length>0&&(d(t),e(".issue__meetings-dropdown .hds-button__label").html(e(t).text()),e(".issue__meetings-select li.selected").attr("aria-selected","false"),e(".issue__meetings-select li.selected").removeClass("selected"),e(t).addClass("selected"),e(t).attr("aria-selected","true"),r()),function(n){const{baseUrl:t,pathPrefix:s,currentPath:i}=window.drupalSettings.path,a=`${t}${s}${i}`;e.ajax({url:`${a}/ajax?decision=${n}`,beforeSend:function(){e(".issue__wrapper .ajax-progress-throbber").show()},success:function(n){const t=JSON.parse(n);t.content&&e(".issue__ajax-container").html(t.content),t.attachments&&e(".issue__container--content .issue-right-column__container").html(t.attachments),t.decision_navigation&&e(".issue__decision-navigation").html(t.decision_navigation),t.all_decisions_link&&e(".issue-dropdown__show-more a").attr("href",t.all_decisions_link),t.show_warning?e(".issue__new-handlings-warning").addClass("visible"):e(".issue__new-handlings-warning").removeClass("visible"),e(".issue-ajax-error__container").hide()},error:function(){e(".issue-ajax-error__container").show()},complete:function(){e(".issue__wrapper .ajax-progress-throbber").hide()}}),window.history.pushState({},"",`${a}?decision=${n}`)}(e(t).data("link"))):r()}function d(t){const s=e(t).data("styleclass"),i=e(t).data("link"),a=["hds-button","hds-button--secondary",s];e(n).removeClass(),a.forEach((function(t){e(n).addClass(t)})),e(n).data("link",i)}e(document).ready((function(){const u=e(".issue__meetings-select li.selected");u.length&&d(e(u)[0]),n.on("click",(function(e){t.toggle(),t.attr("aria-expanded",(function(e,n){return"true"===n?"false":"true"})),a.toggleClass("open")})),n.on("keydown",(function(n){!n.key||"ArrowDown"!==n.key&&"ArrowUp"!==n.key||"none"===t.css("display")&&(e(t).show(),e(t).attr("aria-expanded","true"),e(a).addClass("open"))})),e(i).focusout((function(n){e(this).has(n.relatedTarget).length||r(!1)})),s.on("click keydown",(function(n){n.preventDefault(),n.key&&"Enter"!==n.key||l(e(this))})),a.on("keydown",(function(e){e.key&&"Escape"===e.key&&r(!1)})),s.on("focus",(function(){o=e(s).index(e(this))})),i.on("keydown",c),e("body").on("click",".decision-navigation-button",(function(n){n.preventDefault();const s="A"===n.target.tagName?e(n.target).data("link"):e(n.target).parent("a").data("link");l(e(t).find(`[data-link='${s}']`))}))}))}));