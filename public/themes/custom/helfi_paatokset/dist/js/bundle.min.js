((e,t)=>{e.behaviors.themeCommon={attach:function(){}}})(Drupal,drupalSettings),function(e,t,n){function s(){const t=e(".paatokset__decision-tree-container .accordion__wrapper.handorgel"),n=t.width(),s=t.find("ul.menu"),o=e(t).find(".custom-select-wrapper");e(o).removeClass("hidden");const i=n-o.width()-50,a=e(s).find("li").toArray();let r=0,c=!1;const d=[];for(item of a)r+=e(item).width(),c=r>=i,c&&d.length>0?e(item).addClass("hidden"):(d.push(e(item).find("input").attr("value")),e(item).removeClass("hidden"));if(c){e(o).removeClass("hidden");const t=e(".custom-select-wrapper div.custom-option").toArray();for(item of t)d.includes(e(item).find("input").attr("value"))?e(item).addClass("hidden"):e(item).removeClass("hidden")}else e(o).addClass("hidden")}function o(t){e(t.target).parents(".custom-select-wrapper").length>0?e(t.target).parents(".custom-select").toggleClass("open"):e(".custom-select-wrapper .custom-select").removeClass("open")}function i(t){let n;if("button"===t.target.type)n=e(t.target).val();else{const s=e(t.target).find("input");s&&(n=e(s).val())}n&&(e(".handorgel__content__inner ul.menu li").removeClass("selected"),e(".custom-select-wrapper .custom-option").removeClass("selected"),e(".custom-select-wrapper .custom-option input").attr("aria-pressed",!1),e(`.handorgel__content__inner ul.menu input[value="${n}"]`).parent("li").addClass("selected"),e(`.custom-select-wrapper .custom-option input[value="${n}"]`).parent(".custom-option").addClass("selected"),e(`.custom-select-wrapper .custom-option input[value="${n}"]`).attr("aria-pressed","true")),function(){const t=e(".handorgel__content__inner .selected").find('input[type="button"]').val();e(".policymakers-documents, .policymakers-decisions").removeClass("selected-year"),e(`.policymakers-documents[value="${t}"], .policymakers-decisions[value="${t}"]`).addClass("selected-year")}()}t.behaviors.myBehavior={attach:function(t){n("paatokset_submenus","html",t).forEach((function(){s(),window.addEventListener("resize",s),e(document).click(o),e(t).find(".accordion-item__content__inner.handorgel__content__inner input").click(i)}))}}}(jQuery,Drupal,once),jQuery((function(e){const t=e(".issue__meetings-dropdown button"),n=e(".issue__meetings-select"),s=e(".issue__meetings-select li"),o=e(".issue__meetings-container"),i=e(".issue__meetings-dropdown");var a=-1;function r(s=!0){e(n).hide(),e(n).attr("aria-expanded","false"),e(i).removeClass("open"),s&&e(t).focus()}function c(n){!n.key||"ArrowUp"!==n.key&&"ArrowDown"!==n.key||("ArrowUp"===n.key&&a>-1&&a--,"ArrowDown"===n.key&&a<s.length-1&&a++,a>=0&&a<s.length&&e(s)[a].focus(),-1===a&&t.focus())}function d(n){e(n).data("link")!==e(t).data("link")?(e(n).length>0&&(l(n),e(".issue__meetings-dropdown .hds-button__label").html(e(n).text()),e(".issue__meetings-select li.selected").attr("aria-selected","false"),e(".issue__meetings-select li.selected").removeClass("selected"),e(n).addClass("selected"),e(n).attr("aria-selected","true"),r()),function(t){const n=e("#case-header").data("caseId"),{baseUrl:s,pathPrefix:o,currentPath:i}=window.drupalSettings.path,a=`${s}${o}ahjo_api/case/${n}`;e.ajax({url:`${a}?decision=${t}`,beforeSend:function(){e(".issue__wrapper .ajax-progress-throbber").show()},success:function(t){const n=JSON.parse(t);n.content&&e(".issue__ajax-container").html(n.content),n.attachments&&e(".issue__attachments__wrapper").html(n.attachments),n.decision_navigation&&e(".issue__decision-navigation__wrapper").html(n.decision_navigation),n.all_decisions_link?(e(".issue-dropdown__show-more a").attr("href",n.all_decisions_link),e(".issue-dropdown__show-more a span").text(Drupal.t("Other decisions for the meeting")),e(".issue-dropdown__show-more").css("display","block")):n.other_decisions_link?(e(".issue-dropdown__show-more a").attr("href",n.other_decisions_link),e(".issue-dropdown__show-more a span").text(Drupal.t("Other decisions for the policymaker")),e(".issue-dropdown__show-more").css("display","block")):e(".issue-dropdown__show-more").css("display","none"),n.decision_pdf?(e(".issue__pdf a").attr("href",n.decision_pdf),e(".issue__pdf").css("display","block")):e(".issue__pdf").css("display","none"),n.show_warning?e(".issue__new-handlings-warning").addClass("visible"):e(".issue__new-handlings-warning").removeClass("visible"),e(".issue-ajax-error__container").hide()},error:function(){e(".issue-ajax-error__container").show()},complete:function(){e(".issue__wrapper .ajax-progress-throbber").hide(),window.document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0,cancelable:!0}))}}),window.history.pushState({},"",`${window.location.pathname}?decision=${t}`)}(e(n).data("link"))):r()}function l(n){const s=e(n).data("styleclass"),o=e(n).data("link"),i=["hds-button","hds-button--secondary",s];e(t).removeClass(),i.forEach((function(n){e(t).addClass(n)})),e(t).data("link",o)}e(document).ready((function(){const u=e(".issue__meetings-select li.selected");u.length&&l(e(u)[0]),t.on("click",(function(e){n.toggle(),n.attr("aria-expanded",(function(e,t){return"true"===t?"false":"true"})),i.toggleClass("open")})),t.on("keydown",(function(t){!t.key||"ArrowDown"!==t.key&&"ArrowUp"!==t.key||"none"===n.css("display")&&(e(n).show(),e(n).attr("aria-expanded","true"),e(i).addClass("open"))})),e(o).focusout((function(t){e(this).has(t.relatedTarget).length||r(!1)})),s.on("click keydown",(function(t){t.preventDefault(),t.key&&"Enter"!==t.key||d(e(this))})),i.on("keydown",(function(e){e.key&&"Escape"===e.key&&r(!1)})),s.on("focus",(function(){a=e(s).index(e(this))})),o.on("keydown",c),e("body").on("click",".decision-navigation-button",(function(t){t.preventDefault();const s="A"===t.target.tagName?e(t.target).data("link"):e(t.target).parent("a").data("link");console.log(s),console.log(e(n).find(`[data-link='${s}']`)),d(e(n).find(`[data-link='${s}']`))}))}))}));