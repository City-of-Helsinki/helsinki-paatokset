document.addEventListener("DOMContentLoaded",(function(){function e(e){const n=e.content.querySelector(".accordion-item__button--close-inner");function t(e){e.closest(".accordion__wrapper").querySelector(".accordion-item__button--toggle").focus()}n.addEventListener("mousedown",(function(n){e.close(),n.preventDefault(),t(this)})),n.addEventListener("keypress",(function(n){13!==n.which&&32!==n.which||(e.close(),n.preventDefault(),t(this))}))}const n=document.getElementsByClassName("handorgel-inner");window.handorgel_accordions=[];for(let t of n){const n=new handorgel(t,{multiSelectable:!1,collapsible:!0,ariaEnabled:!0,keyboardInteraction:!0,carouselFocus:!0,initialOpenAttribute:"data-open",initialOpenTransition:!0,initialOpenTransitionDelay:200,headerOpenClass:"handorgel__header--open",contentOpenClass:"handorgel__content--open",headerOpenedClass:"handorgel__header--opened",contentOpenedClass:"handorgel__content--opened",headerFocusClass:"handorgel__header--focus",contentFocusClass:"handorgel__content--focus",headerDisabledClass:"handorgel__header--disabled",contentDisabledClass:"handorgel__content--disabled"});window.handorgel_accordions.push(n),n.folds.forEach(e)}})),((e,n)=>{e.behaviors.themeCommon={attach:function(){}}})(Drupal,drupalSettings),function(e,n,t){function o(){const n=e(".paatokset__decision-tree-container .accordion__wrapper.handorgel"),t=n.width(),o=n.find("ul.menu"),s=e(n).find(".custom-select-wrapper");e(s).removeClass("hidden");const a=t-s.width()-50,i=e(o).find("li").toArray();let r=0,c=!1;const d=[];for(item of i)r+=e(item).width(),c=r>=a,c&&d.length>0?e(item).addClass("hidden"):(d.push(e(item).find("input").attr("value")),e(item).removeClass("hidden"));if(c){e(s).removeClass("hidden");const n=e(".custom-select-wrapper div.custom-option").toArray();for(item of n)d.includes(e(item).find("input").attr("value"))?e(item).addClass("hidden"):e(item).removeClass("hidden")}else e(s).addClass("hidden")}function s(n){e(n.target).parents(".custom-select-wrapper").length>0?e(n.target).parents(".custom-select").toggleClass("open"):e(".custom-select-wrapper .custom-select").removeClass("open")}function a(n){let t;if("button"===n.target.type)t=e(n.target).val();else{const o=e(n.target).find("input");o&&(t=e(o).val())}t&&(e(".handorgel__content__inner ul.menu li").removeClass("selected"),e(".custom-select-wrapper .custom-option").removeClass("selected"),e(".custom-select-wrapper .custom-option input").attr("aria-pressed",!1),e(`.handorgel__content__inner ul.menu input[value="${t}"]`).parent("li").addClass("selected"),e(`.custom-select-wrapper .custom-option input[value="${t}"]`).parent(".custom-option").addClass("selected"),e(`.custom-select-wrapper .custom-option input[value="${t}"]`).attr("aria-pressed","true")),function(){const n=e(".handorgel__content__inner .selected").find('input[type="button"]').val();e(".policymakers-documents, .policymakers-decisions").removeClass("selected-year"),e(`.policymakers-documents[value="${n}"], .policymakers-decisions[value="${n}"]`).addClass("selected-year")}()}n.behaviors.myBehavior={attach:function(n){t("paatokset_submenus","html",n).forEach((function(){o(),window.addEventListener("resize",o),e(document).click(s),e(n).find(".accordion-item__content__inner.handorgel__content__inner input").click(a)}))}}}(jQuery,Drupal,once),jQuery((function(e){const n=e(".issue__meetings-dropdown button"),t=e(".issue__meetings-select"),o=e(".issue__meetings-select li"),s=e(".issue__meetings-container"),a=e(".issue__meetings-dropdown"),i=e(".social-media__items a");var r=-1;function c(o=!0){e(t).hide(),e(t).attr("aria-expanded","false"),e(a).removeClass("open"),o&&e(n).focus()}function d(t){!t.key||"ArrowUp"!==t.key&&"ArrowDown"!==t.key||("ArrowUp"===t.key&&r>-1&&r--,"ArrowDown"===t.key&&r<o.length-1&&r++,r>=0&&r<o.length&&e(o)[r].focus(),-1===r&&n.focus())}function l(t){e(t).data("link")!==e(n).data("link")?(e(t).length>0&&(u(t),e(".issue__meetings-dropdown .hds-button__label").html(e(t).text()),e(".issue__meetings-select li.selected").attr("aria-selected","false"),e(".issue__meetings-select li.selected").removeClass("selected"),e(t).addClass("selected"),e(t).attr("aria-selected","true"),c()),function(n){const t=e("#case-header").data("caseId"),{baseUrl:o,pathPrefix:s,currentPath:a}=window.drupalSettings.path,r=`${o}${s}ahjo_api/case/${t}`;e.ajax({url:`${r}?decision=${n}`,beforeSend:function(){e(".issue__wrapper .ajax-progress-throbber").show()},success:function(n){const t=JSON.parse(n);if(t.content&&e(".issue__ajax-container").html(t.content),t.attachments&&e(".issue__attachments__wrapper").html(t.attachments),t.decision_navigation&&e(".issue__decision-navigation__wrapper").html(t.decision_navigation),t.all_decisions_link?(e(".issue-dropdown__show-more a").attr("href",t.all_decisions_link),e(".issue-dropdown__show-more a span").text(Drupal.t("Other decisions for the meeting")),e(".issue-dropdown__show-more").css("display","block")):t.other_decisions_link?(e(".issue-dropdown__show-more a").attr("href",t.other_decisions_link),e(".issue-dropdown__show-more a span").text(Drupal.t("Other decisions for the policymaker")),e(".issue-dropdown__show-more").css("display","block")):e(".issue-dropdown__show-more").css("display","none"),t.decision_pdf?(e(".issue__pdf a").attr("href",t.decision_pdf),e(".issue__pdf").css("display","block")):e(".issue__pdf").css("display","none"),t.language_urls)for(langcode in t.language_urls)e('.language-link[lang="'+langcode+'"]').attr("href",t.language_urls[langcode]);t.show_warning?e(".issue__new-handlings-warning").addClass("visible"):e(".issue__new-handlings-warning").removeClass("visible"),e(".issue-ajax-error__container").hide()},error:function(){e(".issue-ajax-error__container .hds-notification__label").attr("aria-hidden","false"),e(".issue-ajax-error__container").attr("aria-hidden","false").show()},complete:function(){e(".issue__wrapper .ajax-progress-throbber").hide(),window.document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0,cancelable:!0}))}});var c="paatos";if("sv"===window.drupalSettings.path.currentLanguage&&(c="beslut"),""===(d=window.location.search))var d="?"+c+"=";const l=window.location.host+window.location.pathname+d;window.history.pushState({},"",`${window.location.pathname}?${c}=${n}`),i.each((function(){const n=e(this).attr("href"),t=window.location.host+window.location.pathname+window.location.search;e(this).attr("href",n.replace(l,t))}))}(e(t).data("link"))):c()}function u(t){const o=e(t).data("styleclass"),s=e(t).data("link"),a=["hds-button","hds-button--secondary",o];e(n).removeClass(),a.forEach((function(t){e(n).addClass(t)})),e(n).data("link",s)}e(document).ready((function(){e(".issue-ajax-error__container .hds-notification__label").attr("aria-hidden","true");const i=e(".issue__meetings-select li.selected");i.length&&u(e(i)[0]),n.on("click",(function(e){t.toggle(),t.attr("aria-expanded",(function(e,n){return"true"===n?"false":"true"})),a.toggleClass("open")})),n.on("keydown",(function(n){!n.key||"ArrowDown"!==n.key&&"ArrowUp"!==n.key||"none"===t.css("display")&&(e(t).show(),e(t).attr("aria-expanded","true"),e(a).addClass("open"))})),e(s).focusout((function(n){e(this).has(n.relatedTarget).length||c(!1)})),o.on("click keydown",(function(n){n.preventDefault(),n.key&&"Enter"!==n.key||l(e(this))})),a.on("keydown",(function(e){e.key&&"Escape"===e.key&&c(!1)})),o.on("focus",(function(){r=e(o).index(e(this))})),s.on("keydown",d),e("body").on("click",".decision-navigation-button",(function(n){n.preventDefault();const o="A"===n.target.tagName?e(n.target).data("link"):e(n.target).parent("a").data("link");console.log(o),console.log(e(t).find(`[data-link='${o}']`)),l(e(t).find(`[data-link='${o}']`))}))}))}));