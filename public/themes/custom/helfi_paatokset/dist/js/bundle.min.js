((e,t)=>{e.behaviors.themeCommon={attach:function(){}}})(Drupal,drupalSettings),function(e,t,n){function s(){const t=e(".paatokset__decision-tree-container .accordion__wrapper.handorgel"),n=t.width(),s=t.find("ul.menu"),o=e(t).find(".custom-select-wrapper");e(o).removeClass("hidden");const a=n-o.width()-50,i=e(s).find("li").toArray();let r=0,c=!1;const d=[];for(item of i)r+=e(item).width(),c=r>=a,c&&d.length>0?e(item).addClass("hidden"):(d.push(e(item).find("input").attr("value")),e(item).removeClass("hidden"));if(c){e(o).removeClass("hidden");const t=e(".custom-select-wrapper div.custom-option").toArray();for(item of t)d.includes(e(item).find("input").attr("value"))?e(item).addClass("hidden"):e(item).removeClass("hidden")}else e(o).addClass("hidden")}function o(t){e(t.target).parents(".custom-select-wrapper").length>0?e(t.target).parents(".custom-select").toggleClass("open"):e(".custom-select-wrapper .custom-select").removeClass("open")}function a(t){let n;if("button"===t.target.type)n=e(t.target).val();else{const s=e(t.target).find("input");s&&(n=e(s).val())}n&&(e(".handorgel__content__inner ul.menu li").removeClass("selected"),e(".custom-select-wrapper .custom-option").removeClass("selected"),e(".custom-select-wrapper .custom-option input").attr("aria-pressed",!1),e(`.handorgel__content__inner ul.menu input[value="${n}"]`).parent("li").addClass("selected"),e(`.custom-select-wrapper .custom-option input[value="${n}"]`).parent(".custom-option").addClass("selected"),e(`.custom-select-wrapper .custom-option input[value="${n}"]`).attr("aria-pressed","true")),function(){const t=e(".handorgel__content__inner .selected").find('input[type="button"]').val();e(".policymakers-documents, .policymakers-decisions").removeClass("selected-year"),e(`.policymakers-documents[value="${t}"], .policymakers-decisions[value="${t}"]`).addClass("selected-year")}()}t.behaviors.myBehavior={attach:function(t){n("paatokset_submenus","html",t).forEach((function(){s(),window.addEventListener("resize",s),e(document).click(o),e(t).find(".accordion-item__content__inner.handorgel__content__inner input").click(a)}))}}}(jQuery,Drupal,once),jQuery((function(e){const t=e(".issue__meetings-dropdown button"),n=e(".issue__meetings-select"),s=e(".issue__meetings-select li"),o=e(".issue__meetings-container"),a=e(".issue__meetings-dropdown"),i=e(".social-media__items a");var r=-1;function c(s=!0){e(n).hide(),e(n).attr("aria-expanded","false"),e(a).removeClass("open"),s&&e(t).focus()}function d(n){!n.key||"ArrowUp"!==n.key&&"ArrowDown"!==n.key||("ArrowUp"===n.key&&r>-1&&r--,"ArrowDown"===n.key&&r<s.length-1&&r++,r>=0&&r<s.length&&e(s)[r].focus(),-1===r&&t.focus())}function l(n){e(n).data("link")!==e(t).data("link")?(e(n).length>0&&(u(n),e(".issue__meetings-dropdown .hds-button__label").html(e(n).text()),e(".issue__meetings-select li.selected").attr("aria-selected","false"),e(".issue__meetings-select li.selected").removeClass("selected"),e(n).addClass("selected"),e(n).attr("aria-selected","true"),c()),function(t){const n=e("#case-header").data("caseId"),{baseUrl:s,pathPrefix:o,currentPath:a}=window.drupalSettings.path,r=`${s}${o}ahjo_api/case/${n}`;e.ajax({url:`${r}?decision=${t}`,beforeSend:function(){e(".issue__wrapper .ajax-progress-throbber").show()},success:function(t){const n=JSON.parse(t);n.content&&e(".issue__ajax-container").html(n.content),n.attachments&&e(".issue__attachments__wrapper").html(n.attachments),n.decision_navigation&&e(".issue__decision-navigation__wrapper").html(n.decision_navigation),n.all_decisions_link?(e(".issue-dropdown__show-more a").attr("href",n.all_decisions_link),e(".issue-dropdown__show-more a span").text(Drupal.t("Other decisions for the meeting")),e(".issue-dropdown__show-more").css("display","block")):n.other_decisions_link?(e(".issue-dropdown__show-more a").attr("href",n.other_decisions_link),e(".issue-dropdown__show-more a span").text(Drupal.t("Other decisions for the policymaker")),e(".issue-dropdown__show-more").css("display","block")):e(".issue-dropdown__show-more").css("display","none"),n.decision_pdf?(e(".issue__pdf a").attr("href",n.decision_pdf),e(".issue__pdf").css("display","block")):e(".issue__pdf").css("display","none"),n.show_warning?e(".issue__new-handlings-warning").addClass("visible"):e(".issue__new-handlings-warning").removeClass("visible"),e(".issue-ajax-error__container").hide()},error:function(){e(".issue-ajax-error__container .hds-notification__label").attr("aria-hidden","false"),e(".issue-ajax-error__container").attr("aria-hidden","false").show()},complete:function(){e(".issue__wrapper .ajax-progress-throbber").hide(),window.document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0,cancelable:!0}))}});var c="paatos";if("sv"===window.drupalSettings.path.currentLanguage&&(c="beslut"),""===(d=window.location.search))var d="?"+c+"=";const l=window.location.host+window.location.pathname+d;window.history.pushState({},"",`${window.location.pathname}?${c}=${t}`),i.each((function(){const t=e(this).attr("href"),n=window.location.host+window.location.pathname+window.location.search;e(this).attr("href",t.replace(l,n))}))}(e(n).data("link"))):c()}function u(n){const s=e(n).data("styleclass"),o=e(n).data("link"),a=["hds-button","hds-button--secondary",s];e(t).removeClass(),a.forEach((function(n){e(t).addClass(n)})),e(t).data("link",o)}e(document).ready((function(){e(".issue-ajax-error__container .hds-notification__label").attr("aria-hidden","true");const i=e(".issue__meetings-select li.selected");i.length&&u(e(i)[0]),t.on("click",(function(e){n.toggle(),n.attr("aria-expanded",(function(e,t){return"true"===t?"false":"true"})),a.toggleClass("open")})),t.on("keydown",(function(t){!t.key||"ArrowDown"!==t.key&&"ArrowUp"!==t.key||"none"===n.css("display")&&(e(n).show(),e(n).attr("aria-expanded","true"),e(a).addClass("open"))})),e(o).focusout((function(t){e(this).has(t.relatedTarget).length||c(!1)})),s.on("click keydown",(function(t){t.preventDefault(),t.key&&"Enter"!==t.key||l(e(this))})),a.on("keydown",(function(e){e.key&&"Escape"===e.key&&c(!1)})),s.on("focus",(function(){r=e(s).index(e(this))})),o.on("keydown",d),e("body").on("click",".decision-navigation-button",(function(t){t.preventDefault();const s="A"===t.target.tagName?e(t.target).data("link"):e(t.target).parent("a").data("link");console.log(s),console.log(e(n).find(`[data-link='${s}']`)),l(e(n).find(`[data-link='${s}']`))}))}))}));