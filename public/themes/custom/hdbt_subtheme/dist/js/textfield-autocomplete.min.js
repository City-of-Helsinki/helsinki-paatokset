(()=>{var e=Object.defineProperty;var t=(t,s)=>e(t,"name",{value:s,configurable:true});var s=new AbortController;((Drupal,e)=>{const o=t(e=>{if(!A11yAutocomplete){throw new Error("A11yAutocomplete object not found. Make sure the library is loaded.")}const o=[];const a=e.closest(".hds-text-input");const n=document.querySelector(".form-type-paatokset-textfield-autocomplete .hds-text-input__label");const r=/[“”"()+|*-]/;const i=Drupal.t("Your search contains special characters, such as “ or +. For more results, try searching without special characters.",{},{context:"Frontpage decision search"});const c=Drupal.t("Learn more about using special characters.",{},{context:"Frontpage decision search"});const l=document.createElement("div");let u=a.querySelector(".paatokset-special-char-hint");let h=a.querySelector(".paatokset-special-char-hint-link");if(!u){l.className="decisions-search-bar-wrapper__label-status";u=document.createElement("span");u.className="paatokset-special-char-hint";u.textContent=i;u.setAttribute("role","status");u.setAttribute("aria-live","polite");l.hidden=true;l.appendChild(u);n.after(l);if(!h){h=document.createElement("a");h.className="paatokset-special-char-hint-link";h.href="/test";h.textContent=c;u.appendChild(h)}}const p=Drupal.t("Type @count or more characters for results",{},{context:"Frontpage decision search"});const d=Drupal.t("When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.",{},{context:"Frontpage decision search"});const m=Drupal.t("No decision suggestions were found",{},{context:"Frontpage decision search"});const g=Drupal.t("There are @count results available.",{},{context:"Frontpage decision search"});const v=Drupal.t("There is one result available.",{},{context:"Frontpage decision search"});const f=Drupal.t("@selectedItem @position of @count is highlighted",{},{context:"Frontpage decision search"});const b=e.dataset.autocompletePath;const y=A11yAutocomplete(e,{classes:{inputLoading:"loading",wrapper:"helfi-location-autocomplete"},highlightedAssistiveHint:f,inputAssistiveHint:d,minCharAssistiveHint:p,minChars:0,noResultsAssistiveHint:m,oneResultAssistiveHint:v,someResultsAssistiveHint:g,source:t(async(e,t)=>{if(e.length<3){return t(o)}try{s.abort();s=new AbortController;const a=await fetch(`${b}?q=${e}`,{signal:s.signal});const n=await a.json();t(o.concat(n))}catch(e){if(e.name==="AbortError"){return}console.error(e);t(o)}},"source")});const w=y._internal_object;e.addEventListener("focus",()=>{if(w.input.value===""&&o.length){w.displayResults(o)}});e.addEventListener("keydown",e=>{if(w.input.value===""&&o.length&&w.suggestions.length===0&&e.key==="ArrowDown"){w.displayResults(o)}});e.addEventListener("input",()=>{const t=r.test(e.value);l.hidden=!t})},"init");Drupal.behaviors.paatokset_textfield_autocomplete={attach(t){e("a11y_autocomplete_element","[data-paatokset-textfield-autocomplete]",t).forEach(o)}}})(Drupal,once)})();