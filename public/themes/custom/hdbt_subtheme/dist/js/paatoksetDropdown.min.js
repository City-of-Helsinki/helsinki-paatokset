jQuery((function(e){const n=e(".issue__meetings-dropdown button"),s=e(".issue__meetings-select"),t=e(".issue__meetings-select li"),a=e(".issue__meetings-container"),o=e(".issue__meetings-dropdown"),i=e(".social-media__items a");let r=-1;e(document).ready((function(){e(".issue-ajax-error__container .hds-notification__label").attr("aria-hidden","true");const d=e(".issue__meetings-select li.selected");function l(s){const t=e(s).data("styleclass"),a=e(s).data("link"),o=["hds-button","hds-button--secondary",t];e(n).removeClass(),o.forEach((function(s){e(n).addClass(s)})),e(n).data("link",a)}function c(t=!0){e(s).hide(),e(s).attr("aria-expanded","false"),e(o).removeClass("open"),t&&e(n).focus()}function u(n){const s=e("#case-header").data("caseId"),{baseUrl:t,pathPrefix:a}=window.drupalSettings.path,o=`${t}${a}ahjo_api/case/${s}/${n}`;e.ajax({url:o,beforeSend(){e(".issue__wrapper .ajax-progress-throbber").show()},success(n){n.content&&e(".issue__ajax-container").html(n.content),n.attachments&&e(".issue__attachments__wrapper").html(n.attachments),n.decision_navigation&&e(".issue__decision-navigation__wrapper").html(n.decision_navigation),n.all_decisions_link?(e(".issue-dropdown__show-more a").attr("href",n.all_decisions_link),e(".issue-dropdown__show-more a span").text(Drupal.t("Other decisions for the meeting")),e(".issue-dropdown__show-more").css("display","block")):n.other_decisions_link?(e(".issue-dropdown__show-more a").attr("href",n.other_decisions_link),e(".issue-dropdown__show-more a span").text(Drupal.t("Other decisions for the policymaker")),e(".issue-dropdown__show-more").css("display","block")):e(".issue-dropdown__show-more").css("display","none"),n.decision_pdf?(e(".issue__pdf a").attr("href",n.decision_pdf),e(".issue__pdf").css("display","block")):e(".issue__pdf").css("display","none"),n.language_urls&&Object.keys(n.language_urls).forEach((s=>{e(`.language-link[lang="${s}"]`).attr("href",n.language_urls[s])})),n.show_warning?e(".issue__new-handlings-warning").addClass("visible"):e(".issue__new-handlings-warning").removeClass("visible"),e(".issue-ajax-error__container").hide()},error(){e(".issue-ajax-error__container .hds-notification__label").attr("aria-hidden","false"),e(".issue-ajax-error__container").attr("aria-hidden","false").show()},complete(){e(".issue__wrapper .ajax-progress-throbber").hide(),window.document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0,cancelable:!0}))}});let r="paatos";"sv"===window.drupalSettings.path.currentLanguage?r="beslut":"en"===window.drupalSettings.path.currentLanguage&&(r="decision");let d=window.location.search;""===d&&(d=`?${r}=`);const l=window.location.host+window.location.pathname+d;window.history.pushState({},"",`${window.location.pathname}?${r}=${n}`),i.each((()=>{const n=e(this).attr("href"),s=window.location.host+window.location.pathname+window.location.search;e(this).attr("href",n.replace(l,s))}))}function _(s){e(s).data("link")!==e(n).data("link")?(e(s).length>0&&(l(s),e(".issue__meetings-dropdown .hds-button__label").html(e(s).text()),e(".issue__meetings-select li.selected").attr("aria-selected","false"),e(".issue__meetings-select li.selected").removeClass("selected"),e(s).addClass("selected"),e(s).attr("aria-selected","true"),c()),u(e(s).data("link"))):c()}d.length&&l(e(d)[0]),n.on("click",(function(){s.toggle(),s.attr("aria-expanded",(function(e,n){return"true"===n?"false":"true"})),o.toggleClass("open")})),n.on("keydown",(function(n){!n.key||"ArrowDown"!==n.key&&"ArrowUp"!==n.key||"none"===s.css("display")&&(e(s).show(),e(s).attr("aria-expanded","true"),e(o).addClass("open"))})),e(a).focusout((function(n){e(this).has(n.relatedTarget).length||c(!1)})),t.on("click keydown",(function(n){n.preventDefault(),n.key&&"Enter"!==n.key||_(e(this))})),o.on("keydown",(function(e){e.key&&"Escape"===e.key&&c(!1)})),t.on("focus",(function(){r=e(t).index(e(this))})),a.on("keydown",(function(s){!s.key||"ArrowUp"!==s.key&&"ArrowDown"!==s.key||("ArrowUp"===s.key&&r>-1&&(r-=1),"ArrowDown"===s.key&&r<t.length-1&&(r+=1),r>=0&&r<t.length&&e(t)[r].focus(),-1===r&&n.focus())})),e("body").on("click",".decision-navigation-button",(function(n){n.preventDefault();const t="A"===n.target.tagName?e(n.target).data("link"):e(n.target).parent("a").data("link");_(e(s).find(`[data-link='${t}']`))}))}))}));