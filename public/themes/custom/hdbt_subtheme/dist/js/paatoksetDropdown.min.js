(()=>{var e=Object.defineProperty;var n=(n,t)=>e(n,"name",{value:t,configurable:true});jQuery(function(e){const t=e(".issue__meetings-dropdown button");const s=e(".issue__meetings-select");const i=e(".issue__meetings-select li");const a=e(".issue__meetings-container");const o=e(".issue__meetings-dropdown");const r=e(".social-media__items a");let c=-1;e(document).ready(function(){e(".issue-ajax-error__container .hds-notification__label").attr("aria-hidden","true");const l=e(".issue__meetings-select li.selected");function d(n){const s=e(n).data("styleclass");const i=e(n).data("link");const a=["hds-button","hds-button--secondary",s];e(t).removeClass();a.forEach(function(n){e(t).addClass(n)});e(t).data("link",i)}n(d,"transformButton");function u(){e(s).show();e(s).attr("aria-expanded","true");e(o).addClass("open")}n(u,"openOptions");function _(n=true){e(s).hide();e(s).attr("aria-expanded","false");e(o).removeClass("open");if(n){e(t).focus()}}n(_,"closeOptions");function f(n){if(!n.key||!(n.key==="ArrowUp"||n.key==="ArrowDown")){return}if(n.key==="ArrowUp"&&c>-1){c-=1}if(n.key==="ArrowDown"&&c<i.length-1){c+=1}if(c>=0&&c<i.length){e(i)[c].focus()}if(c===-1){t.focus()}}n(f,"arrowHandler");function h(){e(".issue__new-handlings-warning").removeClass("visible")}n(h,"hideWarning");function p(){e(".issue__new-handlings-warning").addClass("visible")}n(p,"showWarning");function w(n){const t=e("#case-header").data("caseId");const{baseUrl:s,pathPrefix:i}=window.drupalSettings.path;const a=`${s}${i}ahjo_api/case/${t}/${n}`;e.ajax({url:a,beforeSend(){e(".issue__wrapper .ajax-progress-throbber").show()},success(n){if(n.content){e(".issue__ajax-container").html(n.content)}if(n.attachments){e(".issue__attachments__wrapper").html(n.attachments)}if(n.decision_navigation){e(".issue__decision-navigation__wrapper").html(n.decision_navigation)}if(n.all_decisions_link){e(".issue-dropdown__show-more a").attr("href",n.all_decisions_link);e(".issue-dropdown__show-more a span").text(Drupal.t("Other decisions for the meeting"));e(".issue-dropdown__show-more").css("display","block")}else if(n.other_decisions_link){e(".issue-dropdown__show-more a").attr("href",n.other_decisions_link);e(".issue-dropdown__show-more a span").text(Drupal.t("Other decisions for the policymaker"));e(".issue-dropdown__show-more").css("display","block")}else{e(".issue-dropdown__show-more").css("display","none")}if(n.decision_pdf){e(".issue__pdf a").attr("href",n.decision_pdf);e(".issue__pdf").css("display","block")}else{e(".issue__pdf").css("display","none")}if(n.language_urls){Object.keys(n.language_urls).forEach(t=>{e(`.language-link[lang="${t}"]`).attr("href",n.language_urls[t])})}if(n.show_warning){p()}else{h()}e(".issue-ajax-error__container").hide()},error(){e(".issue-ajax-error__container .hds-notification__label").attr("aria-hidden","false");e(".issue-ajax-error__container").attr("aria-hidden","false").show()},complete(){e(".issue__wrapper .ajax-progress-throbber").hide();window.document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:true,cancelable:true}))}});let o="paatos";if(window.drupalSettings.path.currentLanguage==="sv"){o="beslut"}else if(window.drupalSettings.path.currentLanguage==="en"){o="decision"}let c=window.location.search;if(c===""){c=`?${o}=`}const l=window.location.host+window.location.pathname+c;window.history.pushState({},"",`${window.location.pathname}?${o}=${n}`);r.each(()=>{const n=e(this).attr("href");const t=window.location.host+window.location.pathname+window.location.search;e(this).attr("href",n.replace(l,t))})}n(w,"loadDecision");function g(n){if(e(n).data("link")===e(t).data("link")){_();return}if(e(n).length>0){d(n);e(".issue__meetings-dropdown .hds-button__label").html(e(n).text());e(".issue__meetings-select li.selected").attr("aria-selected","false");e(".issue__meetings-select li.selected").removeClass("selected");e(n).addClass("selected");e(n).attr("aria-selected","true");_()}w(e(n).data("link"))}n(g,"selectOption");if(l.length){d(e(l)[0])}t.on("click",function(){s.toggle();s.attr("aria-expanded",function(e,n){return n==="true"?"false":"true"});o.toggleClass("open")});t.on("keydown",function(e){if(e.key&&(e.key==="ArrowDown"||e.key==="ArrowUp")){if(s.css("display")==="none"){u()}}});e(a).focusout(function(n){if(!e(this).has(n.relatedTarget).length){_(false)}});i.on("click keydown",function(n){n.preventDefault();if(!n.key||n.key==="Enter"){g(e(this))}});o.on("keydown",function(e){if(e.key&&e.key==="Escape"){_(false)}});i.on("focus",function(){c=e(i).index(e(this))});a.on("keydown",f);e("body").on("click",".decision-navigation-button",function(n){n.preventDefault();const t=n.target.tagName==="A"?e(n.target).data("link"):e(n.target).parent("a").data("link");g(e(s).find(`[data-link='${t}']`))})})})})();